<%= form.error_messages %>

<% if @sample.new_record? %>
<%= form.hidden_field(:patient_id) if @sample.patient %>
<%= form.hidden_field(:parent_sample_id) if @sample.sample %>
<% end %>

<fieldset>
  <legend>Sample Identification</legend>
  <p><%= @parent_sample ? @parent_sample.sample_type : form.select(:sample_type, ['blood', 'CSF', 'urine']) %></p>
  <p><%= form.text_field :barcode, :size => 30 %></p>
  <p><%= form.label :description %><%= form.text_area :description %></p>
</fieldset>

<fieldset>
  <legend>Collection Details</legend>
  <p>
    <%= form.text_field :original_amount, :label => 'Amount received', :size => 5 %> 
    <%= form.select :original_unit, volume_unit_options, :include_blank => true, :no_label => true %>
  </p>
  <p>
    <%= form.text_field :actual_amount, :label => 'Amount remaining', :size => 5 %> 
    <%= form.select :actual_unit, volume_unit_options, :include_blank => true, :no_label => true %>
  </p>
  <p>
    <%= form.select :collected_by_id, User.all.collect {|u| [ "#{u.login}", u.id ] }, { }, { :include_blank => true } %></p>
    on <%= form.date_select :collected_on, :include_blank => true, :no_label => true %>
  </p>
</fieldset>

<fieldset>
  <legend>Storage Details</legend>
  <p><%= form.select :site_id, Site.find(:all, :order => 'name ASC').collect { |site| [site.name, site.id] }, :include_blank => true %></p>
  <p><%= form.text_field :building %></p>
  <p><%= form.text_field :room %></p>
  <p><%= form.text_area :storage_location %></p>
</fieldset>