<fieldset>
  <legend>Add</legend>
  
  <% if from == 'study' %>

    <% form_remote_tag :url => cohort_cohort_assignments_path(@study) do %>
    	<% fields_for :cohort_assignment, CohortAssignment.new(:assignable_type => @study.assignable_type) do |ca_fields| %>
      	<%= ca_fields.hidden_field :assignable_type %>
      	<%= humanized_type(@study.assignable_type) %>: <%= ca_fields.select(:assignable_id, @study.assignable_type.constantize.all.collect {|p| [ p.to_s, p.id ] }, { :include_blank => true } ) %>
        <br /><br />
        <%= ca_fields.label :label %> <%= ca_fields.text_field :label %>
        <br /><br />
      	<%= submit_tag "Add #{humanized_type @study.assignable_type}" %>
    	<% end %>
    <% end %>
  
  <% elsif from == 'cohort' %> 

    <% form_remote_tag :url => cohort_cohort_assignments_path(@cohort) do %>
    	<% fields_for :cohort_assignment, CohortAssignment.new(:assignable_type => @cohort.assignable_type) do |ca_fields| %>
      	<%= ca_fields.hidden_field :assignable_type %>
      	<%= humanized_type(@cohort.assignable_type) %>: <%= ca_fields.select(:assignable_id, @cohort.assignable_type.constantize.all.collect {|p| [ p.to_s, p.id ] }, { :include_blank => true } ) %>

      	<%= submit_tag "Add #{humanized_type @cohort.assignable_type}" %>
    	<% end %>
    <% end %>
  
  <% end %>
  
</fieldset>